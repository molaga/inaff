(function(e){function t(t){for(var n,s,i=t[0],c=t[1],l=t[2],u=0,f=[];u<i.length;u++)s=i[u],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&f.push(r[s][0]),r[s]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);d&&d(t);while(f.length)f.shift()();return o.push.apply(o,l||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],n=!0,i=1;i<a.length;i++){var c=a[i];0!==r[c]&&(n=!1)}n&&(o.splice(t--,1),e=s(s.s=a[0]))}return e}var n={},r={app:0},o=[];function s(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=n,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(a,n,function(t){return e[t]}.bind(null,n));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/schemaui/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var d=c;o.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"0134":function(e,t,a){"use strict";var n=a("ed94"),r=a.n(n);r.a},"19a3":function(e,t){t.FieldTypes={Object:"object",ObjectId:"objectId",String:"string",Number:"number",Date:"date",Boolean:"boolean"},t.formats={uiDate:"YYYY-MM-DD HH:mm",dateFormat:"YYYY-MM-DD",timeFormat:"HH:mm"},t.PermissionType={Read:"read",Create:"create",Edit:"edit",Delete:"delete"}},"1cea":function(e,t,a){},"2b3d":function(e,t,a){"use strict";var n=a("1cea"),r=a.n(n);r.a},4678:function(e,t,a){var n={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function r(e){var t=o(e);return a(t)}function o(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=o,e.exports=r,r.id="4678"},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[e.headless?e._e():a("v-app-bar",{staticClass:"orange",attrs:{app:"","clipped-left":""}},[a("v-app-bar-nav-icon",{on:{click:function(t){e.drawer=!e.drawer}}}),a("span",{staticClass:"title ml-3 mr-5"},[e._v(" Schema UI "),a("span",{staticClass:"font-weight-light"},[e._v("Dashboard")])]),a("v-spacer"),a("span",[a("v-switch",{staticStyle:{"margin-right":"15px"},attrs:{label:e.dark?"Dark":"Light","input-value":e.dark,inset:"","hide-details":""},on:{change:e.toggleDark}})],1),a("span",[e._v(" v"+e._s(e.version)+" ")])],1),e.headless?e._e():a("v-navigation-drawer",{attrs:{app:"",clipped:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[a("v-list",{attrs:{rounded:""}},[a("v-subheader",[e._v("COLLECTIONS")]),a("v-list-item-group",{attrs:{"active-class":"active"}},e._l(e.collections,(function(t){return a("v-list-item",{key:t.name,class:{active:e.$route.params&&t.name===e.$route.params.collection},attrs:{link:"",to:"/collection/"+t.name}},[a("v-list-item-action",[a("v-icon",[e._v("mdi-chevron-right")])],1),a("v-list-item-content",[a("v-list-item-title",{staticClass:"grey--text"},[e._v(" "+e._s(e._.startCase(t.name))+" ")])],1)],1)})),1)],1),a("v-spacer"),a("div",{staticClass:"credit"},[a("a",{attrs:{href:"https://github.com/molaga"}},[e._v(" Made with â™¡ by "),a("v-icon",[e._v("mdi-github-circle")]),e._v(" molaga ")],1)])],1),a("v-content",[e.hasCollections?[a("router-view")]:e._e()],2)],1)},o=[],s=(a("b64b"),a("5530")),i=(a("96cf"),a("1da1")),c=a("2ef0"),l=a.n(c),d=a("2f62"),u=(a("d3b7"),"/schemaui/api/");function f(e){if(!0===e.success)return e.data;throw new Error(e.data)}var p={methods:{get:function(e){return fetch(u+e,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return f(e)}))},post:function(e,t,a){return fetch(u+e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),signal:a}).then((function(e){return e.json()})).then((function(e){return f(e)}))},delete:function(e){return fetch(u+e,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return f(e)}))}}},m={name:"App",mixins:[p],mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.get("collections");case 2:e.collections=t.sent,e.$router.collections=e.collections,e.headless="true"===e.$route.query.headless,e.updateGlobal();case 6:case"end":return t.stop()}}),t)})))()},computed:Object(s["a"])(Object(s["a"])({_:function(){return l.a}},Object(d["c"])(["version","dark"])),{},{hasCollections:function(){return Boolean(Object.keys(this.collections).length)}}),methods:Object(s["a"])({},Object(d["b"])(["updateGlobal","toggleDark"])),data:function(){return{loaded:!1,drawer:!0,headless:!0,collections:{}}}},b=m,h=(a("5c0b"),a("2877")),v=a("6544"),g=a.n(v),j=a("7496"),y=a("40dc"),k=a("5bc1"),_=a("a75b"),x=a("132d"),w=a("8860"),D=a("da13"),C=a("1800"),O=a("5d23"),M=a("1baa"),T=a("f774"),I=a("2fa4"),V=a("e0c7"),P=a("b73d"),A=Object(h["a"])(b,r,o,!1,null,null,null),F=A.exports;g()(A,{VApp:j["a"],VAppBar:y["a"],VAppBarNavIcon:k["a"],VContent:_["a"],VIcon:x["a"],VList:w["a"],VListItem:D["a"],VListItemAction:C["a"],VListItemContent:O["a"],VListItemGroup:M["a"],VListItemTitle:O["b"],VNavigationDrawer:T["a"],VSpacer:I["a"],VSubheader:V["a"],VSwitch:P["a"]});a("4160"),a("159b");var $,S=a("ade3"),E={UPDATE_GLOBAL:"UPDATE_GLOBAL",UPDATE_DARK_MODE:"UPDATE_DARK_MODE"},q={version:"",dark:!!localStorage["app.dark"]&&"true"===localStorage["app.dark"]},B={version:function(e){var t=e.version;return t},dark:function(e){var t=e.dark;return t}},z={updateGlobal:function(e){var t=e.commit;p.methods.get("config").then((function(e){return t(E.UPDATE_GLOBAL,e)}))},toggleDark:function(e,t){var a=e.commit;localStorage["app.dark"]=t,U.framework.theme.dark=t,a(E.UPDATE_DARK_MODE,t)}},R=($={},Object(S["a"])($,E.UPDATE_GLOBAL,(function(e,t){Object.keys(t).forEach((function(a){e.hasOwnProperty(a)&&(e[a]=t[a])}))})),Object(S["a"])($,E.UPDATE_DARK_MODE,(function(e,t){e.dark=t})),$),N={state:q,getters:B,actions:z,mutations:R},L=a("f309");n["a"].use(L["a"]);var U=new L["a"]({theme:{dark:N.state.dark}}),G=a("8c4f"),Y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{cols:"12"}},[a("v-row",{attrs:{align:"center",justify:"center"}},[e.model?a("v-col",{attrs:{xs:"12",sm:"10"}},[a("v-card",[a("v-card-title",[e._v(" "+e._s(e.$route.params.collection)+" "),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-search",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("v-data-table",{attrs:{headers:e.headers,items:e.items,"footer-props":{"items-per-page-options":[10,50,100,200,500]},"show-expand":"","item-key":"_id","single-expand":!0,expanded:e.expanded,options:e.options,"server-items-length":e.totalItems,loading:e.loading},on:{"update:expanded":function(t){e.expanded=t},"update:options":function(t){e.options=t}},scopedSlots:e._u([{key:"expanded-item",fn:function(t){var n=t.headers,r=t.item;return[r&&r._id?a("td",{staticClass:"expanded-document",attrs:{colspan:n.length}},[a("document-edit",{attrs:{permissions:e.model.options.permissions,"allowed-fields":e.model.fields,document:r},on:{documentUpdate:e.onDocumentUpdate,documentDelete:e.onDocumentDelete}})],1):e._e()]}}],null,!1,3767087412)})],1),e.model.options.permissions.create?a("v-btn",{attrs:{color:"blue",dark:"",big:"",fixed:"",bottom:"",right:"",fab:""},on:{click:function(t){e.newDocumentModal=!0}}},[a("v-icon",[e._v("mdi-plus")])],1):e._e()],1):e._e(),e.model?e._e():a("v-col",[e._v(" Model not found :( ")])],1),a("v-snackbar",{attrs:{timeout:3e3},model:{value:e.toast.open,callback:function(t){e.$set(e.toast,"open",t)},expression:"toast.open"}},[e._v(" "+e._s(e.toast.message)+" "),a("v-btn",{attrs:{color:"blue",text:""},on:{click:function(t){e.toast.open=!1}}},[e._v(" Close ")])],1),e.model&&e.newDocumentModal?a("v-dialog",{staticClass:"new-document-dialog",attrs:{width:"70%"},model:{value:e.newDocumentModal,callback:function(t){e.newDocumentModal=t},expression:"newDocumentModal"}},[a("document-edit",{staticClass:"popup-hosting",attrs:{"allowed-fields":e.model.fields,permissions:e.model.options.permissions,"new-item":!0},on:{documentUpdate:e.onDocumentUpdate}})],1):e._e(),a("v-dialog",{attrs:{width:"290px"},model:{value:e.errorPopup.open,callback:function(t){e.$set(e.errorPopup,"open",t)},expression:"errorPopup.open"}},[a("v-card",[a("v-card-title",{staticClass:"red--text text--darken-4"},[a("v-icon",{staticStyle:{"margin-right":"5px"},attrs:{color:"#B71C1C"}},[e._v("mdi-alert-circle-outline")]),e._v(" Oops... ")],1),a("v-card-text",[e._v(" "+e._s(e.errorPopup.message)+" ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary",type:"button"},on:{click:function(t){e.errorPopup.open=!1}}},[e._v("Got it")])],1)],1)],1)],1)},K=[],H=(a("7db0"),a("c740"),a("a15b"),a("d81d"),a("a434"),a("ac1f"),a("841c"),a("1276"),a("19a3")),J=a("c1df"),W=a.n(J),Q={mixins:[p],data:function(){return{model:null,options:{},loading:!0,errorPopup:{open:!1},expanded:[],toast:{open:!1},newDocumentModal:!1,search:"",totalItems:0,headers:[],items:[],searchTimeut:0,fetchAborter:new AbortController}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.init();case 1:case"end":return t.stop()}}),t)})))()},watch:{$route:function(){this.abortFetch(),this.init(),this.fetchResults()},search:function(){return this.searchDebounce()},options:{handler:function(){return this.fetchResults()},deep:!0}},methods:{init:function(){this.search="",this.model=this.$router.collections[this.$route.params.collection]},searchDebounce:function(){var e=this;clearTimeout(this.searchTimeut),this.searchTimeut=setTimeout((function(){e.options.page=1,e.fetchResults()}),700)},fetchResults:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,n,r,o,s,i,c,d,u,f;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,a=e.options,n=a.sortBy,r=a.sortDesc,o=a.page,s=a.itemsPerPage,i={search:e.search,itemsPerPage:s,page:o},Array.isArray(n)&&n.length&&(i.sort=Object(S["a"])({},n[0],r.length&&!0===r[0]?-1:1)),t.next=7,e.post("collections/"+e.$route.params.collection,i,e.fetchAborter.signal);case 7:c=t.sent,d=c.items,u=c.fields,f=c.totalItems,e.totalItems=f,e.items=d.map((function(t){return u.map((function(a){if(H["FieldTypes"].Date===e.model.fields[a].type&&l.a.get(t,a)){var n=l.a.get(t,a);l.a.set(t,a,W()(n).format(H["formats"].uiDate))}})),t})),e.headers=u.map((function(e){var t=e.split(".").map((function(e){return l.a.startCase(e)})).join(" > ");return{value:e,text:t}})),!0===/^[0-9a-z]{24}$/.test(e.search)&&1===e.items.length&&e.search===e.items[0]._id?e.expanded=e.items:e.expanded=[],t.next=23;break;case 17:if(t.prev=17,t.t0=t["catch"](1),!(t.t0 instanceof DOMException)){t.next=21;break}return t.abrupt("return");case 21:e.errorPopup.message=t.t0.message,e.errorPopup.open=!0;case 23:return t.prev=23,e.loading=!1,t.finish(23);case 26:case"end":return t.stop()}}),t,null,[[1,17,23,26]])})))()},onDocumentUpdate:function(e){var t=this.items.find((function(t){return t._id===e._id}));t?(Object.assign(t,e),this.openToast("Document Successfully Saved!")):(this.newDocumentModal=!1,this.search=e._id)},onDocumentDelete:function(e){var t=this.items.findIndex((function(t){return t._id===e}));-1<t&&(this.items.splice(t,1),this.openToast("Document Deleted Successfully!"))},openToast:function(e){this.toast.message=e,this.toast.open=!0},abortFetch:function(){this.fetchAborter.abort(),this.fetchAborter=new AbortController}}},X=Q,Z=(a("0134"),a("f722"),a("8336")),ee=a("b0af"),te=a("99d9"),ae=a("62ad"),ne=a("a523"),re=a("8fea"),oe=a("169a"),se=a("0fd9"),ie=a("2db4"),ce=a("8654"),le=Object(h["a"])(X,Y,K,!1,null,"11606c96",null),de=le.exports;g()(le,{VBtn:Z["a"],VCard:ee["a"],VCardActions:te["a"],VCardText:te["b"],VCardTitle:te["c"],VCol:ae["a"],VContainer:ne["a"],VDataTable:re["a"],VDialog:oe["a"],VIcon:x["a"],VRow:se["a"],VSnackbar:ie["a"],VSpacer:I["a"],VTextField:ce["a"]});var ue=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{staticClass:"d-flex align-center",attrs:{cols:"12"}},[a("v-row",[a("v-col",{staticClass:"text-center grey--text text--darken-1"},[e._v(" Welcome to "),a("strong",{staticStyle:{"margin-left":"4px"}},[e._v("Schema UI")]),a("br"),a("br"),e._v(" If you already registered a collection, it should appear in the menu to the left ")])],1)],1)},fe=[],pe={},me=pe,be=(a("8a3e"),Object(h["a"])(me,ue,fe,!1,null,"bf140d92",null)),he=be.exports;g()(be,{VCol:ae["a"],VContainer:ne["a"],VRow:se["a"]}),n["a"].use(G["a"]);var ve=new G["a"]({mode:"history",base:"schemaui",routes:[{path:"/collection/:collection",component:de},{path:"*",component:he}]});n["a"].use(d["a"]);var ge=new d["a"].Store({modules:{global:N}}),je=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-form",{ref:"editForm",on:{submit:function(t){return t.preventDefault(),e.saveDocument(t)}}},[e.fields&&Object.keys(e.fields).length?a("v-card",{staticClass:"fields-container"},[e.newItem?e._e():a("v-row",[a("v-col",{staticClass:"d-flex justify-end id-label grey--text text--accent-4"},[e._v(" ID: "+e._s(e.item._id)+" ")])],1),a("v-row",[a("v-col",{attrs:{sm:"10",md:"8",lg:"6"}},[e.fields[e.fieldTypes.String]?e._l(e.fields[e.fieldTypes.String],(function(t){return a("dynamic-field",{key:t.key,attrs:{field:t,disabled:!e.canEdit},model:{value:e.item[t.key],callback:function(a){e.$set(e.item,t.key,a)},expression:"item[field.key]"}})})):e._e(),e.fields[e.fieldTypes.Number]?e._l(e.fields[e.fieldTypes.Number],(function(t){return a("dynamic-field",{key:t.key,attrs:{field:t,disabled:!e.canEdit},model:{value:e.item[t.key],callback:function(a){e.$set(e.item,t.key,a)},expression:"item[field.key]"}})})):e._e(),e.fields[e.fieldTypes.ObjectId]?e._l(e.fields[e.fieldTypes.ObjectId],(function(t){return a("dynamic-field",{key:t.key,attrs:{field:t,disabled:!e.canEdit},model:{value:e.item[t.key],callback:function(a){e.$set(e.item,t.key,a)},expression:"item[field.key]"}})})):e._e(),e.fields[e.fieldTypes.Date]?[e._l(e.fields[e.fieldTypes.Date],(function(t,n){return a("v-text-field",{key:t.key,attrs:{outlined:!0,dense:!0,rules:e.requiredField(t.required,t.key),required:t.required,label:e.getFieldName(t.key),disabled:!e.canEdit,"prepend-icon":"mdi-calendar",readonly:""},on:{click:function(a){return e.openDateModal(t.key,n)},focus:function(a){return e.openDateModal(t.key,n)}},model:{value:e.item[t.key],callback:function(a){e.$set(e.item,t.key,a)},expression:"item[field.key]"}})})),a("v-dialog",{ref:"dateModal",attrs:{persistent:"",width:"290px"},model:{value:e.dateModal.open,callback:function(t){e.$set(e.dateModal,"open",t)},expression:"dateModal.open"}},[1===e.dateModal.step?a("v-date-picker",{attrs:{scrollable:""},model:{value:e.dateModal.date,callback:function(t){e.$set(e.dateModal,"date",t)},expression:"dateModal.date"}},[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.dateModal.open=!1}}},[e._v("Cancel")]),a("v-btn",{attrs:{text:"",color:"primary",disabled:!e.dateModal.date},on:{click:function(t){e.dateModal.step=2}}},[e._v("Next")])],1):e._e(),2===e.dateModal.step?a("v-time-picker",{attrs:{format:"24hr","full-width":""},model:{value:e.dateModal.time,callback:function(t){e.$set(e.dateModal,"time",t)},expression:"dateModal.time"}},[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.dateModal.step=1}}},[e._v("Back")]),a("v-btn",{attrs:{text:"",color:"primary",disabled:!e.dateModal.time},on:{click:function(t){return e.saveDateModal()}}},[e._v("OK")])],1):e._e()],1)]:e._e(),e.fields[e.fieldTypes.Boolean]?e._l(e.fields[e.fieldTypes.Boolean],(function(t){return a("dynamic-field",{key:t.key,attrs:{field:t,disabled:!e.canEdit},model:{value:e.item[t.key],callback:function(a){e.$set(e.item,t.key,a)},expression:"item[field.key]"}})})):e._e()],2)],1),a("v-card-actions",[a("v-spacer"),e.newItem?a("v-btn",{attrs:{raised:"",color:"primary",loading:e.loading,disabled:e.loading,type:"submit"}},[e._v("Create new Document")]):e._e(),e.newItem?e._e():[a("v-btn",{attrs:{text:"",color:"#f00",disabled:!e.canDelete||e.loading,type:"button"},on:{click:function(t){e.openDeleteConfirm=!0}}},[e._v("Delete")]),a("v-btn",{attrs:{raised:"",color:"primary",loading:e.loading,disabled:!e.canEdit||e.loading,type:"submit"}},[e._v("Save Changes")])]],2),a("v-dialog",{ref:"openDeleteConfirm",attrs:{width:"290px"},model:{value:e.openDeleteConfirm,callback:function(t){e.openDeleteConfirm=t},expression:"openDeleteConfirm"}},[a("v-card",[a("v-card-title",[e._v("Are you sure?")]),a("v-card-text",[e._v(" You're about to delete this document, proceed with this action? ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary",type:"button",disabled:e.loading},on:{click:function(t){return e.deleteItem()}}},[e._v("Sure, DO IT!")])],1)],1)],1),a("v-dialog",{attrs:{width:"290px"},model:{value:e.errorPopup.open,callback:function(t){e.$set(e.errorPopup,"open",t)},expression:"errorPopup.open"}},[a("v-card",[a("v-card-title",{staticClass:"red--text text--darken-4"},[a("v-icon",{staticStyle:{"margin-right":"5px"},attrs:{color:"#B71C1C"}},[e._v("mdi-alert-circle-outline")]),e._v(" Oops... ")],1),a("v-card-text",[e._v(" "+e._s(e.errorPopup.message)+" ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary",type:"button"},on:{click:function(t){e.errorPopup.open=!1}}},[e._v("Got it")])],1)],1)],1)],1):e._e(),!1===e.loaded?a("v-progress-circular",{attrs:{size:50,color:"primary",indeterminate:""}}):e._e()],1)],1)},ye=[],ke=(a("99af"),a("498a"),{methods:{getFieldName:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.split(".").map((function(e){return l.a.startCase(e)})).join(" > ")}}}),_e={mixins:[p,ke],props:["allowedFields","document","newItem","permissions"],data:function(){return{fieldTypes:H["FieldTypes"],loaded:!1,loading:!1,openDeleteConfirm:!1,errorPopup:{open:!1},fields:{},item:{},dateModal:{}}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.init();case 1:case"end":return t.stop()}}),t)})))()},computed:{_:function(){return l.a},canEdit:function(){return Boolean(!0===this.permissions.edit||!0===this.newItem&&!0===this.permissions.create)},canDelete:function(){return Boolean(!0===this.permissions.delete)}},methods:{requiredField:function(e,t){return e?[function(e){return!!e||"Missing "+l.a.startCase(t)},function(e){return Boolean("string"===typeof e&&e.trim().length)||"Invalid "+l.a.startCase(t)}]:[]},parseModelFromDb:function(e){for(var t={},a=Object.keys(this.allowedFields),n=0,r=a;n<r.length;n++){var o=r[n];if(l.a.has(e,o)){var s=l.a.get(e,o),i=l.a.get(this.allowedFields,o);H["FieldTypes"].Date===i.type&&s&&s.length?t[o]=W()(s).format(H["formats"].uiDate):t[o]=s}}return t},formatModelToDb:function(e){for(var t={},a=Object.keys(this.allowedFields),n=0,r=a;n<r.length;n++){var o=r[n];if(e.hasOwnProperty(o)){var s=l.a.get(this.allowedFields,o);H["FieldTypes"].Date===s.type&&e[o]&&e[o].length?l.a.set(t,o,W()(e[o],H["formats"].uiDate).toISOString()):l.a.set(t,o,e[o])}}return t},init:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.newItem){t.next=7;break}return t.next=3,e.get("collections/".concat(e.$route.params.collection,"/initial"));case 3:a=t.sent,e.item=e.parseModelFromDb(a),t.next=11;break;case 7:return t.next=9,e.get("collections/".concat(e.$route.params.collection,"/").concat(e.document._id));case 9:n=t.sent,e.item=e.parseModelFromDb(n);case 11:e.fields=l.a.groupBy(e.allowedFields,"type"),e.loaded=!0;case 13:case"end":return t.stop()}}),t)})))()},saveDateModal:function(){this.item[this.dateModal.key]="".concat(this.dateModal.date," ").concat(this.dateModal.time),this.dateModal={}},openDateModal:function(e){if(this.dateModal={key:e,step:1,open:!0},this.item[e]&&this.item[e].length){var t=W()(this.item[e],H["formats"].uiDate);this.dateModal.date=t.format(H["formats"].dateFormat),this.dateModal.time=t.format(H["formats"].timeFormat)}},saveDocument:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,n,r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e.$refs.editForm.validate(),a){t.next=3;break}return t.abrupt("return");case 3:if(!0!==e.loading){t.next=5;break}return t.abrupt("return");case 5:return e.loading=!0,t.prev=6,n=l.a.cloneDeep(e.item),r=e.formatModelToDb(n),t.next=11,e.post("collections/".concat(e.$route.params.collection,"/save"),r);case 11:o=t.sent,e.newItem?e.$emit("documentUpdate",{_id:o._id}):e.$emit("documentUpdate",n),t.next=19;break;case 15:t.prev=15,t.t0=t["catch"](6),e.errorPopup.message=t.t0.message,e.errorPopup.open=!0;case 19:e.loading=!1;case 20:case"end":return t.stop()}}),t,null,[[6,15]])})))()},deleteItem:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!0!==e.loading){t.next=2;break}return t.abrupt("return");case 2:return e.loading=!0,t.prev=3,a=e.document._id,t.next=7,e.delete("collections/".concat(e.$route.params.collection,"/").concat(a));case 7:e.$emit("documentDelete",a),e.openDeleteConfirm=!1,t.next=15;break;case 11:t.prev=11,t.t0=t["catch"](3),e.errorPopup.message=t.t0.message,e.errorPopup.open=!0;case 15:e.loading=!1;case 16:case"end":return t.stop()}}),t,null,[[3,11]])})))()}},watch:{document:function(){this.loaded=!1,this.fields={},this.item={},this.init()}}},xe=_e,we=(a("2b3d"),a("2e4b")),De=a("4bd4"),Ce=a("490a"),Oe=a("c964"),Me=Object(h["a"])(xe,je,ye,!1,null,"11f50cf2",null),Te=Me.exports;g()(Me,{VBtn:Z["a"],VCard:ee["a"],VCardActions:te["a"],VCardText:te["b"],VCardTitle:te["c"],VCol:ae["a"],VDatePicker:we["a"],VDialog:oe["a"],VForm:De["a"],VIcon:x["a"],VProgressCircular:Ce["a"],VRow:se["a"],VSpacer:I["a"],VTextField:ce["a"],VTimePicker:Oe["a"]});a("4de4");var Ie,Ve,Pe=a("3835"),Ae=a("2b5d"),Fe=a("b974"),$e=a("a844"),Se={props:["value"],mixins:[ke],computed:{_:function(){return l.a}},methods:{requiredField:function(e,t){return e?[function(e){return!!e||"Missing "+l.a.startCase(t)},function(e){return Boolean("string"===typeof e&&e.trim().length)||"Invalid "+l.a.startCase(t)}]:[]},requiredNumber:function(e,t){return e?[function(e){return"undefined"!==typeof e||!!e||"Missing "+l.a.startCase(t)},function(e){return Boolean("number"===typeof e)||"Invalid "+l.a.startCase(t)}]:[]},requiredFieldArray:function(e,t){return e?[function(e){return Array.isArray(e)&&Boolean(e.length)||"Missing "+l.a.startCase(t)},function(e){return Array.isArray(e)&&0===e.filter((function(e){return 0===e.trim().length})).length||"Invalid "+l.a.startCase(t)}]:[]},requiredObjectId:function(e,t){return e?[function(e){return!!e||"Missing "+l.a.startCase(t)},function(e){return Boolean("string"===typeof e&&/^[a-z0-9]{24}$/.test(e))||"Invalid "+l.a.startCase(t)}]:[]},requiredObjectIdArray:function(e,t){return e?[function(e){return Array.isArray(e)&&Boolean(e.length)||"Missing "+l.a.startCase(t)},function(e){return Array.isArray(e)&&0===e.filter((function(e){return!1===/^[a-z0-9]{24}$/.test(e)})).length||"Invalid "+l.a.startCase(t)}]:[]}},render:function(e){var t=this,a=t.$attrs.field,n=c(),r=Object(Pe["a"])(n,2),o=r[0],s=r[1];if("_id"!==a.key)return e(o,{props:s,on:{input:function(e){return t.$emit("input",i(e))},change:function(e){H["FieldTypes"].Boolean===a.type&&t.$emit("input",Boolean(e))}}});function i(e){return a.type===H["FieldTypes"].Number&&!1===isNaN(parseInt(e))?parseInt(e):e}function c(){var e=ce["a"],n={value:t.value,placeholder:t.getFieldName(a.key),label:t.getFieldName(a.key),outlined:!0,required:a.required,dense:!0,disabled:t.$attrs.disabled||!1,rules:t.requiredField(a.required,a.key)},r=a.hasOwnProperty("enum");switch(a.type){case H["FieldTypes"].String:a.multi||!0===r?(e=a.multi?Ae["a"]:Fe["a"],n.multiple=a.multi,n.chips=a.multi,n.rules=a.multi?t.requiredFieldArray(a.required,a.key):t.requiredField(a.required,a.key),!0===r&&(e=Fe["a"],n.items=a.enum,n.clearable=!0)):!0===a.textarea&&(e=$e["a"],n["auto-grow"]=!0);break;case H["FieldTypes"].ObjectId:a.multi?(e=Ae["a"],n.multiple=!0,n.chips=!0,n.rules=t.requiredObjectIdArray(a.required,a.key)):n.rules=t.requiredObjectId(a.required,a.key);break;case H["FieldTypes"].Number:e=ce["a"],n.type=a.type,n.rules=t.requiredNumber(a.required,a.key);break;case H["FieldTypes"].Boolean:e=P["a"],n["input-value"]=t.value,delete n.value,delete n.required,delete n.rules;break;default:throw new Error("Couldn't find any type for ".concat(a.key))}return[e,n]}}},Ee=Se,qe=Object(h["a"])(Ee,Ie,Ve,!1,null,null,null),Be=qe.exports;n["a"].config.productionTip=!1,n["a"].component("document-edit",Te),n["a"].component("dynamic-field",Be),new n["a"]({vuetify:U,router:ve,store:ge,render:function(e){return e(F)}}).$mount("#app")},"5c0b":function(e,t,a){"use strict";var n=a("7694"),r=a.n(n);r.a},7694:function(e,t,a){},"8a3e":function(e,t,a){"use strict";var n=a("c40b"),r=a.n(n);r.a},"9c72":function(e,t,a){},c40b:function(e,t,a){},ed94:function(e,t,a){},f722:function(e,t,a){"use strict";var n=a("9c72"),r=a.n(n);r.a}});